<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Кабинет пользователя</title>
<!--  <link rel="stylesheet" href="../static/css/styles.css">-->
</head>
<body>

<div class="top-buttons">
  <form th:action="@{/}" method="get" style="display: inline;">
    <button type="submit" class="btn">На главную</button>
  </form>
  <form th:action="@{/books}" method="get" style="display: inline;">
    <button type="submit" class="btn">Список книг</button>
  </form>
  <form th:action="@{/logout}" method="post" style="display: inline;">
    <button type="submit" class="btn btn-danger">Выйти из кабинета</button>
  </form>
</div>

<h2>Забронированные книги</h2>
<table>
  <thead>
  <tr>
    <th>Название</th>
    <th>Бронь действительна до</th>
    <th>Действие</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="booking : ${bookings}">
    <td th:text="${booking.book.title}">Название книги</td>
    <td th:text="${#temporals.format(booking.pickupDeadline, 'dd.MM.yyyy HH:mm')}">Дата</td>
    <td>
      <form th:action="@{/cancel-booking}" method="post">
        <input type="hidden" th:name="bookingId" th:value="${booking.id}" />
        <button type="submit" class="btn btn-danger">Отменить бронирование</button>
      </form>
    </td>
  </tr>
  </tbody>
</table>

<h2>Книги в аренде</h2>
<table>
  <thead>
  <tr>
    <th>Название</th>
    <th>Дата начала аренды</th>
    <th>Необходимо вернуть до</th>
    <th>Статус</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="rental : ${activeRentals}"
      th:classappend="${rental.status} == 'EXPIRED' ? 'expired-booking' : ''">
    <td th:text="${rental.book.title}">Название книги</td>
    <td th:text="${#temporals.format(rental.rentStartDate, 'dd.MM.yyyy HH:mm')}">Дата начала</td>
    <td th:text="${#temporals.format(rental.rentEndDate, 'dd.MM.yyyy HH:mm')}">Срок возврата</td>
    <td th:text="${rental.status}">Статус</td>
  </tr>

  </tbody>
</table>

<h2>История аренды</h2>
<table>
  <thead>
  <tr>
    <th>Название</th>
    <th>Дата возврата</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="history : ${returnedBooks}">
    <td th:text="${history.book.title}">Название книги</td>
    <td th:text="${#temporals.format(history.rentEndDate, 'dd.MM.yyyy')}">Дата возврата</td>
  </tr>
  </tbody>
</table>

</body>
</html>